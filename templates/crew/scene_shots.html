{% extends "crew/crew_base.html" %}

{% block title %}Scene {{ scene.scene_number }} Shots - {{ scene.title }} -
Barnacle Films Inc.{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col">
            <!-- Scene Header -->
            <div class="row mb-4">
                <div class="col">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a
                                    href="{{ url_for('crew_shotlist') }}">Shot
                                    List</a></li>
                            <li class="breadcrumb-item active">Scene {{
                                scene.scene_number }}</li>
                        </ol>
                    </nav>

                    <div
                        class="d-flex justify-content-between align-items-start">
                        <div>
                            <h1 class="text-black mb-2">Scene {{
                                scene.scene_number }}: {{ scene.title }}</h1>
                            <p class="lead text-muted">{{ scene.description
                                }}</p>

                            <!-- Work in Progress Notice -->
                            <div class="alert alert-warning alert-sm mt-3">
                                <i class="fas fa-tools"></i>
                                <strong>Work in Progress:</strong> Shot details
                                are placeholder data.
                                Check <a href="{{ url_for('crew_dashboard') }}"
                                    class="alert-link">morning announcements</a>
                                for updates.
                            </div>
                        </div>
                        <div class="text-end">
                            <div class="btn-group" role="group">
                                <button type="button"
                                    class="btn btn-outline-primary"
                                    onclick="window.print()">
                                    <i class="fas fa-print"></i> Print
                                </button>
                                <button type="button"
                                    class="btn btn-outline-success"
                                    onclick="exportToPDF()">
                                    <i class="fas fa-file-pdf"></i> Export PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scene Information -->
            <div class="row mb-4">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Scene Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Location</h6>
                                    <p>{{ scene.location }}</p>

                                    <h6>Time of Day</h6>
                                    <p>{{ scene.time_of_day }}</p>

                                    <h6>Scene Type</h6>
                                    <p>{{ scene.scene_type }}</p>
                                </div>
                                <div class="col-md-6">
                                    <h6>Estimated Duration</h6>
                                    <p>{{ scene.estimated_duration }}</p>

                                    <h6>Shot Count</h6>
                                    <p>{{ scene.shot_count if scene.shot_count >
                                        0 else 'Not specified' }}</p>

                                    <h6>Status</h6>
                                    <p>{{ scene.status|title }}</p>
                                </div>
                            </div>

                            {% if scene.characters %}
                            <div class="mt-3">
                                <h6>Characters</h6>
                                <p>{{ scene.characters }}</p>
                            </div>
                            {% endif %}

                            {% if scene.notes %}
                            <div class="mt-3">
                                <h6>Notes</h6>
                                <p>{{ scene.notes }}</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="col-lg-4">
                    <!-- Scene Actions -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Scene Actions</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <a href="{{ url_for('crew_shotlist') }}"
                                    class="btn btn-outline-primary">
                                    <i class="fas fa-list"></i> Back to Shot
                                    List
                                </a>
                                <a
                                    href="{{ url_for('crew_scene_detail', scene_id=scene.id) }}"
                                    class="btn btn-outline-info">
                                    <i class="fas fa-info"></i> Scene Details
                                </a>
                                {% if scene.call_sheet_id %}
                                <a
                                    href="{{ url_for('crew_callsheet_detail', sheet_id=scene.call_sheet_id) }}"
                                    class="btn btn-outline-success">
                                    <i class="fas fa-calendar"></i> View Call
                                    Sheet
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Related Scenes -->
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Related Scenes</h5>
                        </div>
                        <div class="card-body">
                            <div class="list-group list-group-flush">
                                {% if scene.scene_number > 1 %}
                                <a
                                    href="{{ url_for('crew_scene_shots', scene_id=scene.id-1) }}"
                                    class="list-group-item list-group-item-action">
                                    <i class="fas fa-arrow-left"></i> Previous
                                    Scene
                                </a>
                                {% endif %}
                                {% if scene.scene_number < 50 %}
                                <a
                                    href="{{ url_for('crew_scene_shots', scene_id=scene.id+1) }}"
                                    class="list-group-item list-group-item-action">
                                    <i class="fas fa-arrow-right"></i> Next
                                    Scene
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shot List -->
            {% if scene.shot_count > 0 %}
            <div class="row">
                <div class="col">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Shot List</h5>
                        </div>
                        <div class="card-body">
                            {% if scene.scene_number == 12 %}
                            <!-- Side 2: Dominic Car Scene Shot List -->
                            <div class="alert alert-info">
                                <i class="fas fa-video"></i>
                                <strong>Camera:</strong> RED KOMODO 6K |
                                <strong>Lenses:</strong> Vintage Canon FD Lenses
                            </div>

                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Shot #</th>
                                            <th>Scene</th>
                                            <th>Location</th>
                                            <th>Shot Type</th>
                                            <th>Lens</th>
                                            <th>Description</th>
                                            <th>Movement</th>
                                            <th>Notes</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="table-primary">
                                            <td colspan="8"><strong>SIDE 2 -
                                                    DOMINIC CAR
                                                    SCENE</strong></td>
                                        </tr>
                                        <tr>
                                            <td>21</td>
                                            <td>Side 2</td>
                                            <td>EXT Neighborhood</td>
                                            <td>Wide</td>
                                            <td>35mm</td>
                                            <td>Dallas approaching car, Dominic
                                                intercepts</td>
                                            <td>Static</td>
                                            <td>Establish suburban setting</td>
                                        </tr>
                                        <tr>
                                            <td>22</td>
                                            <td>Side 2</td>
                                            <td>EXT Car</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Dallas hastily folding papers,
                                                shoving in glove
                                                compartment</td>
                                            <td>Handheld</td>
                                            <td>His secretive behavior</td>
                                        </tr>
                                        <tr>
                                            <td>23</td>
                                            <td>Side 2</td>
                                            <td>EXT Car</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Dominic climbing uninvited into
                                                passenger seat</td>
                                            <td>Static</td>
                                            <td>His pushy, friendly nature</td>
                                        </tr>
                                        <tr>
                                            <td>24</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>Two Shot</td>
                                            <td>50mm</td>
                                            <td>Dallas uncomfortable as Dominic
                                                settles in with cables</td>
                                            <td>Static</td>
                                            <td>Cramped space, Dallas's
                                                discomfort</td>
                                        </tr>
                                        <tr>
                                            <td>25</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Dominic gesturing about raccoon
                                                behavior</td>
                                            <td>Handheld</td>
                                            <td>His animated conspiracy
                                                theories</td>
                                        </tr>
                                        <tr>
                                            <td>26</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Dallas glances toward marsh
                                                through windshield</td>
                                            <td>Pan</td>
                                            <td>Show his awareness of real
                                                threat</td>
                                        </tr>
                                        <tr>
                                            <td>27</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Weather device emitting warning
                                                beep</td>
                                            <td>Static</td>
                                            <td>Technology detecting
                                                supernatural</td>
                                        </tr>
                                        <tr>
                                            <td>28</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>POV</td>
                                            <td>50mm</td>
                                            <td>View of marsh grass swaying
                                                unnaturally</td>
                                            <td>Static</td>
                                            <td>What Dallas sees - ominous
                                                movement</td>
                                        </tr>
                                        <tr>
                                            <td>29</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Dallas's hand hovering over
                                                device controls</td>
                                            <td>Handheld</td>
                                            <td>His internal conflict about
                                                revealing truth</td>
                                        </tr>
                                        <tr>
                                            <td>30</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Dominic questioning the weather
                                                device setup</td>
                                            <td>Static</td>
                                            <td>Normal person's reaction to
                                                strange tech</td>
                                        </tr>
                                        <tr>
                                            <td>31</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Dallas switching off beeping
                                                device</td>
                                            <td>Handheld</td>
                                            <td>Hiding evidence from
                                                neighbor</td>
                                        </tr>
                                        <tr>
                                            <td>32</td>
                                            <td>Side 2</td>
                                            <td>EXT School</td>
                                            <td>Wide</td>
                                            <td>35mm</td>
                                            <td>Mac, Makayla, Asher emerging,
                                                deep in conversation</td>
                                            <td>Static</td>
                                            <td>Establish kids' secret
                                                knowledge</td>
                                        </tr>
                                        <tr>
                                            <td>33</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Dominic watching kids through
                                                windshield</td>
                                            <td>Static</td>
                                            <td>Adult dismissing children's
                                                concerns</td>
                                        </tr>
                                        <tr>
                                            <td>34</td>
                                            <td>Side 2</td>
                                            <td>EXT Car</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Makayla whispering urgently to
                                                Mac</td>
                                            <td>Handheld</td>
                                            <td>Kids sharing supernatural
                                                intel</td>
                                        </tr>
                                        <tr>
                                            <td>35</td>
                                            <td>Side 2</td>
                                            <td>EXT Car</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Dominic leaning back through
                                                window</td>
                                            <td>Static</td>
                                            <td>His well-meaning but misguided
                                                plans</td>
                                        </tr>
                                        <tr>
                                            <td>36</td>
                                            <td>Side 2</td>
                                            <td>INT Car</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Dallas's troubled
                                                expression</td>
                                            <td>Static</td>
                                            <td>His burden of secret
                                                knowledge</td>
                                        </tr>
                                        <tr>
                                            <td>37</td>
                                            <td>Side 2</td>
                                            <td>EXT Background</td>
                                            <td>Wide</td>
                                            <td>35mm</td>
                                            <td>Dominic driving away, marsh
                                                grass swaying ominously</td>
                                            <td>Static</td>
                                            <td>Closing shot emphasizing ongoing
                                                threat</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            {% elif scene.scene_number == 10 %}
                            <!-- Side 1: Dallas and Mac Kitchen Scene Shot List -->
                            <div class="alert alert-info">
                                <i class="fas fa-video"></i>
                                <strong>Camera:</strong> RED KOMODO 6K |
                                <strong>Lenses:</strong> Vintage Canon FD Lenses
                            </div>

                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Shot #</th>
                                            <th>Scene</th>
                                            <th>Location</th>
                                            <th>Shot Type</th>
                                            <th>Lens</th>
                                            <th>Description</th>
                                            <th>Movement</th>
                                            <th>Notes</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="table-success">
                                            <td colspan="8"><strong>SIDE 1 -
                                                    DALLAS AND MAC KITCHEN
                                                    SCENE</strong></td>
                                        </tr>
                                        <tr>
                                            <td>1</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Wide</td>
                                            <td>35mm</td>
                                            <td>Establishing shot - cramped
                                                kitchen with boxes, Dallas and
                                                Mac at table</td>
                                            <td>Static</td>
                                            <td>Show isolation, boxes suggest
                                                recent move</td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Two shot - Dallas and Mac across
                                                table during awkward
                                                conversation</td>
                                            <td>Static</td>
                                            <td>Emphasize distance between
                                                them</td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Dallas picking at food, trying
                                                to connect</td>
                                            <td>Handheld</td>
                                            <td>Shallow DOF, show his
                                                nervousness</td>
                                        </tr>
                                        <tr>
                                            <td>4</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Mac staring at plate,
                                                withdrawn</td>
                                            <td>Handheld</td>
                                            <td>Match previous shot, show his
                                                isolation</td>
                                        </tr>
                                        <tr>
                                            <td>5</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Dallas glances toward weather
                                                equipment in corner</td>
                                            <td>Pan right</td>
                                            <td>Reveal his obsession/coping
                                                mechanism</td>
                                        </tr>
                                        <tr>
                                            <td>6</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Weather device detail - wires,
                                                gauges, chimes</td>
                                            <td>Static</td>
                                            <td>Insert shot showing makeshift
                                                nature</td>
                                        </tr>
                                        <tr>
                                            <td>7</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Wide</td>
                                            <td>35mm</td>
                                            <td>Both freeze as otherworldly
                                                groan sounds</td>
                                            <td>Static</td>
                                            <td>Capture both reactions
                                                simultaneously</td>
                                        </tr>
                                        <tr>
                                            <td>8</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Mac moves to window</td>
                                            <td>Follow</td>
                                            <td>Track his movement toward
                                                mystery</td>
                                        </tr>
                                        <tr>
                                            <td>9</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Mac's face pressed against
                                                glass</td>
                                            <td>Handheld</td>
                                            <td>Show his curiosity/fear</td>
                                        </tr>
                                        <tr>
                                            <td>10</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>POV</td>
                                            <td>50mm</td>
                                            <td>Mac's view through window -
                                                marsh grass swaying</td>
                                            <td>Static</td>
                                            <td>What Mac sees - establish
                                                exterior threat</td>
                                        </tr>
                                        <tr>
                                            <td>11</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Dallas joins Mac at window</td>
                                            <td>Dolly in</td>
                                            <td>Their first moment of unity</td>
                                        </tr>
                                        <tr>
                                            <td>12</td>
                                            <td>Side 1</td>
                                            <td>INT Kitchen</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Pulsing light in reeds
                                                (practical effect)</td>
                                            <td>Static</td>
                                            <td>Key supernatural element</td>
                                        </tr>
                                        <tr>
                                            <td>13</td>
                                            <td>Side 1</td>
                                            <td>EXT Cottage</td>
                                            <td>Wide</td>
                                            <td>35mm</td>
                                            <td>Dallas and Mac emerge from
                                                cottage into evening air</td>
                                            <td>Static</td>
                                            <td>Establish exterior location,
                                                mood</td>
                                        </tr>
                                        <tr>
                                            <td>14</td>
                                            <td>Side 1</td>
                                            <td>EXT Cottage</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Mac with audio recorder,
                                                pressing record</td>
                                            <td>Handheld</td>
                                            <td>Show his scientific curiosity
                                                like mother</td>
                                        </tr>
                                        <tr>
                                            <td>15</td>
                                            <td>Side 1</td>
                                            <td>EXT Cottage</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Dallas checking weather device
                                                readings</td>
                                            <td>Handheld</td>
                                            <td>His equipment detecting
                                                anomaly</td>
                                        </tr>
                                        <tr>
                                            <td>16</td>
                                            <td>Side 1</td>
                                            <td>EXT Cottage</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Mac ventures toward tall grass,
                                                Dallas follows</td>
                                            <td>Follow</td>
                                            <td>Show their cautious
                                                investigation</td>
                                        </tr>
                                        <tr>
                                            <td>17</td>
                                            <td>Side 1</td>
                                            <td>EXT Cottage</td>
                                            <td>Wide</td>
                                            <td>35mm</td>
                                            <td>Both silhouetted against marsh
                                                as light pulses brighter</td>
                                            <td>Static</td>
                                            <td>Cinematic moment, anamorphic
                                                bokeh</td>
                                        </tr>
                                        <tr>
                                            <td>18</td>
                                            <td>Side 1</td>
                                            <td>EXT Cottage</td>
                                            <td>Close Up</td>
                                            <td>75mm</td>
                                            <td>Dallas staring at equipment,
                                                then marsh, then Mac</td>
                                            <td>Pan</td>
                                            <td>His realization - science,
                                                mystery, son</td>
                                        </tr>
                                        <tr>
                                            <td>19</td>
                                            <td>Side 1</td>
                                            <td>EXT Cottage</td>
                                            <td>Medium</td>
                                            <td>50mm</td>
                                            <td>Light fades, Mac hits stop on
                                                recorder</td>
                                            <td>Static</td>
                                            <td>End of supernatural
                                                encounter</td>
                                        </tr>
                                        <tr>
                                            <td>20</td>
                                            <td>Side 1</td>
                                            <td>EXT Cottage</td>
                                            <td>Wide</td>
                                            <td>35mm</td>
                                            <td>Father and son in quiet moment
                                                after mystery</td>
                                            <td>Static</td>
                                            <td>Their new shared experience</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i>
                                <strong>Shot list:</strong> Details will be
                                available when this scene is scheduled for
                                filming.
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="row">
                <div class="col">
                    <div class="alert alert-warning text-center">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>No shots planned for this scene yet.</strong>
                        Shot details will be available when this scene is
                        scheduled for filming.
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
function exportToPDF() {
    // Simple PDF export using browser's print functionality
    // In a production environment, you'd use a proper PDF library like jsPDF
    window.print();
}

// Print styles
window.addEventListener('beforeprint', function() {
    // Add print-specific styles
    document.body.classList.add('printing');
});

window.addEventListener('afterprint', function() {
    // Remove print-specific styles
    document.body.classList.remove('printing');
});
</script>

<style>
@media print {
    .btn-group, .card-header .btn, .breadcrumb {
        display: none !important;
    }
    
    .card {
        border: 1px solid #000 !important;
        break-inside: avoid;
    }
    
    .table {
        font-size: 12px;
    }
    
    h1, h2, h3, h4, h5, h6 {
        color: #000 !important;
    }
}
</style>
{% endblock %}
