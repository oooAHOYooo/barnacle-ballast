{% extends "crew/crew_base.html" %}

{% block title %}Scene {{ scene.scene_number }} Shots - {{ scene.title }} -
Barnacle Films Inc.{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col">
            <!-- Scene Header -->
            <div class="row mb-4">
                <div class="col">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a
                                    href="{{ url_for('crew_shotlist') }}">Shot
                                    List</a></li>
                            <li class="breadcrumb-item active">Scene {{
                                scene.scene_number }}</li>
                        </ol>
                    </nav>

                    <div
                        class="d-flex justify-content-between align-items-start">
                        <div>
                            <h1 class="text-black mb-2">Scene {{
                                scene.scene_number }}: {{ scene.title }}</h1>
                            <p class="lead text-muted">{{ scene.description
                                }}</p>

                            <!-- Work in Progress Notice -->
                            <div class="alert alert-warning alert-sm mt-3">
                                <i class="fas fa-tools"></i>
                                <strong>Work in Progress:</strong> Shot details
                                are placeholder data.
                                Check <a href="{{ url_for('crew_dashboard') }}"
                                    class="alert-link">morning announcements</a>
                                for updates.
                            </div>
                        </div>
                        <div class="text-end">
                            <div class="btn-group" role="group">
                                <button type="button"
                                    class="btn btn-outline-primary"
                                    onclick="window.print()">
                                    <i class="fas fa-print"></i> Print
                                </button>
                                <button type="button"
                                    class="btn btn-outline-success"
                                    onclick="exportToPDF()">
                                    <i class="fas fa-file-pdf"></i> Export PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scene Information -->
            <div class="row mb-4">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Scene Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Location</h6>
                                    <p>{{ scene.location }}</p>

                                    <h6>Time of Day</h6>
                                    <p>{{ scene.time_of_day }}</p>

                                    <h6>Scene Type</h6>
                                    <p>{{ scene.scene_type }}</p>
                                </div>
                                <div class="col-md-6">
                                    <h6>Estimated Duration</h6>
                                    <p>{{ scene.estimated_duration }}</p>

                                    <h6>Shot Count</h6>
                                    <p>{{ scene.shot_count if scene.shot_count >
                                        0 else 'Not specified' }}</p>

                                    <h6>Status</h6>
                                    <p>{{ scene.status|title }}</p>
                                </div>
                            </div>

                            {% if scene.characters %}
                            <div class="mt-3">
                                <h6>Characters</h6>
                                <p>{{ scene.characters }}</p>
                            </div>
                            {% endif %}

                            {% if scene.notes %}
                            <div class="mt-3">
                                <h6>Notes</h6>
                                <p>{{ scene.notes }}</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="col-lg-4">
                    <!-- Scene Actions -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Scene Actions</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <a href="{{ url_for('crew_shotlist') }}"
                                    class="btn btn-outline-primary">
                                    <i class="fas fa-list"></i> Back to Shot
                                    List
                                </a>
                                <a
                                    href="{{ url_for('crew_scene_detail', scene_id=scene.id) }}"
                                    class="btn btn-outline-info">
                                    <i class="fas fa-info"></i> Scene Details
                                </a>
                                {% if scene.call_sheet_id %}
                                <a
                                    href="{{ url_for('crew_callsheet_detail', sheet_id=scene.call_sheet_id) }}"
                                    class="btn btn-outline-success">
                                    <i class="fas fa-calendar"></i> View Call
                                    Sheet
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Related Scenes -->
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Related Scenes</h5>
                        </div>
                        <div class="card-body">
                            <div class="list-group list-group-flush">
                                {% if scene.scene_number > 1 %}
                                <a
                                    href="{{ url_for('crew_scene_shots', scene_id=scene.id-1) }}"
                                    class="list-group-item list-group-item-action">
                                    <i class="fas fa-arrow-left"></i> Previous
                                    Scene
                                </a>
                                {% endif %}
                                {% if scene.scene_number < 50 %}
                                <a
                                    href="{{ url_for('crew_scene_shots', scene_id=scene.id+1) }}"
                                    class="list-group-item list-group-item-action">
                                    <i class="fas fa-arrow-right"></i> Next
                                    Scene
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shot List -->
            {% if scene.shot_count > 0 %}
            <div class="row">
                <div class="col">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Shot List</h5>
                        </div>
                        <div class="card-body">
                            {% if scene.scene_number == 12 %}
                            <!-- Side 2: Dominic Car Scene Shot List -->
                            <div class="alert alert-info">
                                <i class="fas fa-video"></i>
                                <strong>Camera:</strong> RED KOMODO 6K |
                                <strong>Lenses:</strong> Vintage Canon FD Lenses
                            </div>

                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Shot #</th>
                                            <th>Scene</th>
                                            <th>Location</th>
                                            <th>Shot Type</th>
                                            <th>Lens</th>
                                            <th>Description</th>
                                            <th>Movement</th>
                                            <th>Notes</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="table-primary">
                                            <td colspan="8"><strong>EXT.
                                                    NEIGHBORHOOD STREET -
                                                    DAY</strong></td>
                                        </tr>
                                        <tr>
                                            <td>1</td>
                                            <td>12A</td>
                                            <td>Street</td>
                                            <td>Wide Establishing</td>
                                            <td>35mm</td>
                                            <td>Suburban street, kids walking to
                                                school</td>
                                            <td>Static, slightly high angle</td>
                                            <td>Normal, idyllic</td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>12A</td>
                                            <td>Street</td>
                                            <td>Dominic MS</td>
                                            <td>50mm</td>
                                            <td>Dominic walking, looking around
                                                suspiciously</td>
                                            <td>Tracking shot, following
                                                Dominic</td>
                                            <td>Paranoia, observant</td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>12A</td>
                                            <td>Street</td>
                                            <td>POV Dominic</td>
                                            <td>35mm</td>
                                            <td>What Dominic sees (normal
                                                street, but he's looking for
                                                anomalies)</td>
                                            <td>Handheld, slight jitters</td>
                                            <td>His perspective</td>
                                        </tr>
                                        <tr>
                                            <td>4</td>
                                            <td>12A</td>
                                            <td>Street</td>
                                            <td>Insert - Raccoon</td>
                                            <td>75mm</td>
                                            <td>Raccoon scurrying into
                                                bushes</td>
                                            <td>Quick pan</td>
                                            <td>Foreshadowing</td>
                                        </tr>
                                        <tr>
                                            <td>5</td>
                                            <td>12A</td>
                                            <td>Street</td>
                                            <td>Dominic CU (reaction)</td>
                                            <td>75mm</td>
                                            <td>Dominic reacts to raccoon,
                                                knowing look</td>
                                            <td>Static</td>
                                            <td>Implies deeper meaning</td>
                                        </tr>
                                        <tr class="table-primary">
                                            <td colspan="8"><strong>INT.
                                                    DOMINIC'S CAR -
                                                    DAY</strong></td>
                                        </tr>
                                        <tr>
                                            <td>6</td>
                                            <td>12B</td>
                                            <td>Car</td>
                                            <td>Two-shot (Dominic & Dallas)</td>
                                            <td>35mm</td>
                                            <td>Dominic driving, Dallas in
                                                passenger seat</td>
                                            <td>Static, mounted in car</td>
                                            <td>Confined space, intimate
                                                conversation</td>
                                        </tr>
                                        <tr>
                                            <td>7</td>
                                            <td>12B</td>
                                            <td>Car</td>
                                            <td>OTS Dominic</td>
                                            <td>50mm</td>
                                            <td>Over Dominic's shoulder to
                                                Dallas</td>
                                            <td>Static</td>
                                            <td>Focus on Dallas's reaction</td>
                                        </tr>
                                        <tr>
                                            <td>8</td>
                                            <td>12B</td>
                                            <td>Car</td>
                                            <td>OTS Dallas</td>
                                            <td>50mm</td>
                                            <td>Over Dallas's shoulder to
                                                Dominic</td>
                                            <td>Static</td>
                                            <td>Focus on Dominic's
                                                intensity</td>
                                        </tr>
                                        <tr>
                                            <td>9</td>
                                            <td>12B</td>
                                            <td>Car</td>
                                            <td>Insert - Weather Device</td>
                                            <td>75mm</td>
                                            <td>Close-up of strange device on
                                                dashboard</td>
                                            <td>Static</td>
                                            <td>Mysterious, sci-fi element</td>
                                        </tr>
                                        <tr>
                                            <td>10</td>
                                            <td>12B</td>
                                            <td>Car</td>
                                            <td>Dominic CU (explaining)</td>
                                            <td>75mm</td>
                                            <td>Dominic passionately explaining
                                                conspiracy</td>
                                            <td>Slight push-in</td>
                                            <td>Intensity, conviction</td>
                                        </tr>
                                        <tr>
                                            <td>11</td>
                                            <td>12B</td>
                                            <td>Car</td>
                                            <td>Dallas CU (skeptical)</td>
                                            <td>75mm</td>
                                            <td>Dallas listening, skeptical but
                                                intrigued</td>
                                            <td>Static</td>
                                            <td>Internal conflict</td>
                                        </tr>
                                        <tr>
                                            <td>12</td>
                                            <td>12B</td>
                                            <td>Car</td>
                                            <td>Wide Shot (car interior)</td>
                                            <td>35mm</td>
                                            <td>Wider shot of car interior,
                                                showing both</td>
                                            <td>Static</td>
                                            <td>Captures the dynamic</td>
                                        </tr>
                                        <tr class="table-primary">
                                            <td colspan="8"><strong>EXT. SCHOOL
                                                    PICKUP - DAY</strong></td>
                                        </tr>
                                        <tr>
                                            <td>13</td>
                                            <td>12C</td>
                                            <td>School</td>
                                            <td>Wide Establishing</td>
                                            <td>35mm</td>
                                            <td>School entrance, kids pouring
                                                out</td>
                                            <td>Static</td>
                                            <td>Chaotic, normal end of school
                                                day</td>
                                        </tr>
                                        <tr>
                                            <td>14</td>
                                            <td>12C</td>
                                            <td>School</td>
                                            <td>Dominic & Dallas (car)</td>
                                            <td>50mm</td>
                                            <td>Dominic and Dallas in car,
                                                watching kids</td>
                                            <td>Static</td>
                                            <td>Observing, waiting</td>
                                        </tr>
                                        <tr>
                                            <td>15</td>
                                            <td>12C</td>
                                            <td>School</td>
                                            <td>Kids CU (whispering)</td>
                                            <td>75mm</td>
                                            <td>Group of kids whispering,
                                                looking at car</td>
                                            <td>Static</td>
                                            <td>Implies kids know something</td>
                                        </tr>
                                        <tr>
                                            <td>16</td>
                                            <td>12C</td>
                                            <td>School</td>
                                            <td>Dominic CU (realization)</td>
                                            <td>75mm</td>
                                            <td>Dominic realizes kids know</td>
                                            <td>Slow push-in</td>
                                            <td>Shock, confirmation of
                                                theories</td>
                                        </tr>
                                        <tr>
                                            <td>17</td>
                                            <td>12C</td>
                                            <td>School</td>
                                            <td>Wide Shot (car drives off)</td>
                                            <td>35mm</td>
                                            <td>Car drives away, leaving
                                                school</td>
                                            <td>Tracking shot, following
                                                car</td>
                                            <td>Open ending, mystery
                                                continues</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            {% elif scene.scene_number == 10 %}
                            <!-- Side 1: Mac & Dallas Dinner Scene Shot List -->
                            <div class="alert alert-info">
                                <i class="fas fa-video"></i>
                                <strong>Camera:</strong> RED KOMODO 6K |
                                <strong>Lenses:</strong> Vintage Canon FD Lenses
                                (35mm, 50mm, 75mm)
                            </div>

                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Shot #</th>
                                            <th>Scene</th>
                                            <th>Location</th>
                                            <th>Shot Type</th>
                                            <th>Lens</th>
                                            <th>Description</th>
                                            <th>Movement</th>
                                            <th>Notes</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="table-success">
                                            <td colspan="8"><strong>INT. COTTAGE
                                                    KITCHEN -
                                                    EVENING</strong></td>
                                        </tr>
                                        <tr>
                                            <td>1</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Wide Establishing</td>
                                            <td>35mm</td>
                                            <td>Mac and Dallas in cramped
                                                kitchen, boxes everywhere</td>
                                            <td>Static on tripod, slightly high
                                                angle</td>
                                            <td>Deep focus, cluttered space</td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Dallas MS</td>
                                            <td>50mm</td>
                                            <td>Dallas at table, picking at
                                                food</td>
                                            <td>Handheld, slight movement</td>
                                            <td>Shallow DOF, background
                                                soft</td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Mac CU</td>
                                            <td>75mm</td>
                                            <td>Mac's face, concerned</td>
                                            <td>Handheld, intimate</td>
                                            <td>Shallow DOF, Mac sharp,
                                                background very soft</td>
                                        </tr>
                                        <tr>
                                            <td>4</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>OTS Dallas</td>
                                            <td>50mm</td>
                                            <td>Over Dallas's shoulder to
                                                Mac</td>
                                            <td>Static</td>
                                            <td>Focus on Mac</td>
                                        </tr>
                                        <tr>
                                            <td>5</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>OTS Mac</td>
                                            <td>50mm</td>
                                            <td>Over Mac's shoulder to
                                                Dallas</td>
                                            <td>Static</td>
                                            <td>Focus on Dallas</td>
                                        </tr>
                                        <tr>
                                            <td>6</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Two-shot</td>
                                            <td>35mm</td>
                                            <td>Mac and Dallas, slightly
                                                wider</td>
                                            <td>Static</td>
                                            <td>Capturing their dynamic</td>
                                        </tr>
                                        <tr>
                                            <td>7</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Insert - Food</td>
                                            <td>75mm</td>
                                            <td>Close-up of untouched food</td>
                                            <td>Static</td>
                                            <td>Emphasize tension</td>
                                        </tr>
                                        <tr>
                                            <td>8</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Mac MS (moving)</td>
                                            <td>50mm</td>
                                            <td>Mac stands, moves to window</td>
                                            <td>Steadicam/Gimbal, tracking
                                                Mac</td>
                                            <td>Reveals his unease</td>
                                        </tr>
                                        <tr>
                                            <td>9</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Dallas CU (reaction)</td>
                                            <td>75mm</td>
                                            <td>Dallas reacts to Mac's
                                                movement</td>
                                            <td>Static</td>
                                            <td>Subtle facial expression</td>
                                        </tr>
                                        <tr>
                                            <td>10</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Mac at Window</td>
                                            <td>35mm</td>
                                            <td>Mac looking out window,
                                                silhouette</td>
                                            <td>Static</td>
                                            <td>Mysterious, ominous feel</td>
                                        </tr>
                                        <tr>
                                            <td>11</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>POV Mac (window)</td>
                                            <td>35mm</td>
                                            <td>What Mac sees outside (darkness,
                                                trees)</td>
                                            <td>Static</td>
                                            <td>Build suspense</td>
                                        </tr>
                                        <tr>
                                            <td>12</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Dallas MS (rising)</td>
                                            <td>50mm</td>
                                            <td>Dallas slowly rises from
                                                table</td>
                                            <td>Slow push-in</td>
                                            <td>Growing tension</td>
                                        </tr>
                                        <tr>
                                            <td>13</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Mac CU (turn)</td>
                                            <td>75mm</td>
                                            <td>Mac turns sharply, eyes
                                                wide</td>
                                            <td>Quick pan</td>
                                            <td>Jump scare potential</td>
                                        </tr>
                                        <tr>
                                            <td>14</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Creature POV</td>
                                            <td>35mm (wide, distorted)</td>
                                            <td>Blurry, fast-moving POV from
                                                outside</td>
                                            <td>Fast handheld, shaky</td>
                                            <td>Disorienting, creature's
                                                perspective</td>
                                        </tr>
                                        <tr>
                                            <td>15</td>
                                            <td>10A</td>
                                            <td>Kitchen</td>
                                            <td>Two-shot (panic)</td>
                                            <td>35mm</td>
                                            <td>Mac and Dallas huddle
                                                together</td>
                                            <td>Handheld, slight sway</td>
                                            <td>Emphasize fear, unity</td>
                                        </tr>
                                        <tr class="table-success">
                                            <td colspan="8"><strong>EXT. COTTAGE
                                                    - NIGHT</strong></td>
                                        </tr>
                                        <tr>
                                            <td>16</td>
                                            <td>10B</td>
                                            <td>Exterior</td>
                                            <td>Wide Establishing</td>
                                            <td>35mm</td>
                                            <td>Cottage exterior, dark,
                                                ominous</td>
                                            <td>Static, low angle</td>
                                            <td>Emphasize isolation</td>
                                        </tr>
                                        <tr>
                                            <td>17</td>
                                            <td>10B</td>
                                            <td>Exterior</td>
                                            <td>Creature Reveal</td>
                                            <td>75mm</td>
                                            <td>Quick glimpse of creature in
                                                shadows</td>
                                            <td>Quick pan/tilt</td>
                                            <td>Partial, unsettling reveal</td>
                                        </tr>
                                        <tr>
                                            <td>18</td>
                                            <td>10B</td>
                                            <td>Exterior</td>
                                            <td>Mac & Dallas (window)</td>
                                            <td>50mm</td>
                                            <td>Mac and Dallas looking out
                                                window from inside</td>
                                            <td>Static</td>
                                            <td>Reflection, fear</td>
                                        </tr>
                                        <tr>
                                            <td>19</td>
                                            <td>10B</td>
                                            <td>Exterior</td>
                                            <td>Insert - Creature tracks</td>
                                            <td>75mm</td>
                                            <td>Close-up of strange tracks in
                                                mud</td>
                                            <td>Static</td>
                                            <td>Evidence of creature</td>
                                        </tr>
                                        <tr>
                                            <td>20</td>
                                            <td>10B</td>
                                            <td>Exterior</td>
                                            <td>Wide Shot (ending)</td>
                                            <td>35mm</td>
                                            <td>Cottage, quiet, but
                                                unsettling</td>
                                            <td>Slow zoom out</td>
                                            <td>Lingering dread</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i>
                                <strong>Shot list:</strong> Details will be
                                available when this scene is scheduled for
                                filming.
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="row">
                <div class="col">
                    <div class="alert alert-warning text-center">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>No shots planned for this scene yet.</strong>
                        Shot details will be available when this scene is
                        scheduled for filming.
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
function exportToPDF() {
    // Simple PDF export using browser's print functionality
    // In a production environment, you'd use a proper PDF library like jsPDF
    window.print();
}

// Print styles
window.addEventListener('beforeprint', function() {
    // Add print-specific styles
    document.body.classList.add('printing');
});

window.addEventListener('afterprint', function() {
    // Remove print-specific styles
    document.body.classList.remove('printing');
});
</script>

<style>
@media print {
    .btn-group, .card-header .btn, .breadcrumb {
        display: none !important;
    }
    
    .card {
        border: 1px solid #000 !important;
        break-inside: avoid;
    }
    
    .table {
        font-size: 12px;
    }
    
    h1, h2, h3, h4, h5, h6 {
        color: #000 !important;
    }
}
</style>
{% endblock %}
